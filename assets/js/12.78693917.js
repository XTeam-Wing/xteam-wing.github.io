(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{332:function(s,t,a){"use strict";a.r(t);var e=a(10),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),t("p",[s._v("因为觉得interactsh好用，而且开源，所以就自己搭建了一波。")]),s._v(" "),t("p",[s._v("interactsh 是为nuclei打造的dnslog服务。")]),s._v(" "),t("p",[s._v("官方Web地址https://app.interactsh.com/")]),s._v(" "),t("p",[s._v("其实最好用的是这个https://github.com/Buzz2d0/Hyuga")]),s._v(" "),t("p",[s._v("对比interactsh支持DNS重绑定。")]),s._v(" "),t("h2",{attrs:{id:"效果"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#效果"}},[s._v("#")]),s._v(" 效果")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://xscan-image.oss-cn-beijing.aliyuncs.com/blog/image-20211206204813931.png",alt:"image-20211206204813931"}})]),s._v(" "),t("h2",{attrs:{id:"搭建步骤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#搭建步骤"}},[s._v("#")]),s._v(" 搭建步骤")]),s._v(" "),t("p",[s._v("准备两个域名A和B，一台ECS，官方是一个，但是改dns服务器容易出问题，直接解析不到。")]),s._v(" "),t("p",[s._v("A的设置:")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://xscan-image.oss-cn-beijing.aliyuncs.com/blog/image-20211206201845884.png",alt:""}})]),s._v(" "),t("p",[s._v("B的设置")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://xscan-image.oss-cn-beijing.aliyuncs.com/blog/image-20211206201936067.png",alt:"image-20211206201936067"}})]),s._v(" "),t("p",[s._v("A域名就是用来做dnslog的域名。")]),s._v(" "),t("p",[s._v("在VPS上执行:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--net")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("host projectdiscovery/interactsh-server:latest "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-domain")]),s._v(" A "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ip")]),s._v(" vpsip -origin-url\thttps://web访问的域名\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("origin-url这个参数是给前端验证用的，同源策略，建议设置成*，这样的话本地也能用。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://xscan-image.oss-cn-beijing.aliyuncs.com/blog/image-20211206202354343.png",alt:"image-20211206202354343"}})]),s._v(" "),t("p",[s._v("会自动帮你申请https证书，但是需要注意，每天只能三次，超过就只能http。")]),s._v(" "),t("p",[s._v("记得停掉这个服务")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("systemctl stop systemd-resolved\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://xscan-image.oss-cn-beijing.aliyuncs.com/blog/image-20211206204233096.png",alt:"image-20211206204233096"}})]),s._v(" "),t("p",[s._v("这样就说明搭建成功了。")]),s._v(" "),t("p",[s._v("接下来是前端的搭建。")]),s._v(" "),t("p",[s._v("https://github.com/projectdiscovery/interactsh-web")]),s._v(" "),t("p",[s._v("将interactsh.com改为自己的域名就行。https要不要换成http取决于自己的服务是否配成功了https。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("yarn\nyarn build\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("将静态文件传到github，这里推荐用github page作为Web服务，非常方便。")]),s._v(" "),t("p",[s._v("比如https://redtools.redteaming.net/")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://xscan-image.oss-cn-beijing.aliyuncs.com/blog/image-20211206205512303.png",alt:"image-20211206205512303"}})]),s._v(" "),t("h2",{attrs:{id:"辅助脚本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#辅助脚本"}},[s._v("#")]),s._v(" 辅助脚本")]),s._v(" "),t("p",[s._v("最后再分享下我的Dnslog验证脚本")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://xscan-image.oss-cn-beijing.aliyuncs.com/blog/image-20211206204929274.png",alt:"image-20211206204929274"}})]),s._v(" "),t("p",[s._v("https://github.com/XTeam-Wing/Py-Interactsh")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://xscan-image.oss-cn-beijing.aliyuncs.com/blog/image-20211206205340011.png",alt:"image-20211206205340011"}})])])}),[],!1,null,null,null);t.default=n.exports}}]);